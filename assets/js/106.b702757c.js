(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{520:function(s,a,e){"use strict";e.r(a);var t=e(15),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"html的内容安全策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html的内容安全策略"}},[s._v("#")]),s._v(" HTML的内容安全策略")]),s._v(" "),e("h2",{attrs:{id:"是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#是什么"}},[s._v("#")]),s._v(" 是什么")]),s._v(" "),e("p",[s._v("HTTP 协议的 "),e("code",[s._v("Content-Security-Policy")]),s._v(" 响应头允许网站管理员控制用户代理可以为给定页面加载的资源")]),s._v(" "),e("h2",{attrs:{id:"有什么用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#有什么用"}},[s._v("#")]),s._v(" 有什么用")]),s._v(" "),e("p",[s._v("可以防止[[Web安全详解#跨站点脚本攻击]]")]),s._v(" "),e("h2",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[s._v("#")]),s._v(" 语法")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Content-Security-Policy: <policy-directive>; <policy-directive>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"指令-policy-directive-说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#指令-policy-directive-说明"}},[s._v("#")]),s._v(" 指令"),e("code",[s._v("<policy-directive>")]),s._v("说明")]),s._v(" "),e("h3",{attrs:{id:"获取资源型指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取资源型指令"}},[s._v("#")]),s._v(" 获取资源型指令")]),s._v(" "),e("h4",{attrs:{id:"可选来源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可选来源"}},[s._v("#")]),s._v(" 可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("<host-source>")]),s._v(" : 因特网主机的名称或IP地址，以及可选的URL方案和/或端口号")]),s._v(" "),e("li",[e("code",[s._v("<scheme-source>")]),s._v(" 某种协议方案，符合该协议的均被视为有效源，例如："),e("code",[s._v("http:")]),s._v(","),e("code",[s._v("https:")]),s._v(","),e("code",[s._v("blob:")]),s._v(","),e("code",[s._v("data:")]),s._v(" 等，注意，必须有冒号")]),s._v(" "),e("li",[e("code",[s._v("'self'")]),s._v(":  与当前文档同源（包括相同的URL协议地址和端口号），必须包括单引号")]),s._v(" "),e("li",[e("code",[s._v("'unsafe-eval'")]),s._v(" : 允许使用"),e("code",[s._v("eval（）")]),s._v("和类似方法从字符串创建代码。必须包括单引号")]),s._v(" "),e("li",[e("code",[s._v("'unsafe-hashes'")]),s._v(":允许启用特定的内联事件处理程序。如果只需要允许内联事件处理程序，而不需要内联"),e("code",[s._v("<script>")]),s._v("元素或"),e("code",[s._v("javascript:url")]),s._v("，那么这种方法比使用不安全的内联表达式更安全")]),s._v(" "),e("li",[e("code",[s._v("'unsafe-inline'")]),s._v(": 允许使用内联资源，例如内联"),e("code",[s._v("<script>")]),s._v("元素、"),e("code",[s._v("javascript:url")]),s._v("、内联事件处理程序和内联"),e("code",[s._v("<style>")]),s._v("元素。单引号是必需的")]),s._v(" "),e("li",[e("code",[s._v("'none'")]),s._v(" : 引用空集合，即不匹配 url。需要单引号")]),s._v(" "),e("li",[e("code",[s._v("'nonce-<base64-value>'")]),s._v(":使用加密"),e("code",[s._v("nonce")]),s._v("（一次使用的数字）的特定内联脚本的允许列表。服务器必须在每次传输策略时生成唯一的"),e("code",[s._v("nonce")]),s._v("值。提供一个不可用的"),e("code",[s._v("nonce")]),s._v("是至关重要的，因为绕过资源的策略在其他方面是微不足道的。指定"),e("code",[s._v("nonce")]),s._v("会使现代浏览器忽略“不安全的内联”，这仍然可以为没有"),e("code",[s._v("nonce")]),s._v("支持的旧浏览器设置")]),s._v(" "),e("li",[e("code",[s._v("'<hash-algorithm>-<base64-value>'")]),s._v(":脚本或样式的sha256、sha384或sha512散列。此源代码的使用由两部分组成，两部分用破折号分隔：用于创建哈希的加密算法和脚本或样式的base64编码哈希。生成散列时，不要包含"),e("code",[s._v("<script>")]),s._v("或"),e("code",[s._v("<style>")]),s._v("标记，并注意大小写和空格很重要，包括前导或尾随空格")])]),s._v(" "),e("h4",{attrs:{id:"child-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#child-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("child-src")])]),s._v(" "),e("p",[s._v("定义使用 "),e("code",[s._v("<frame>")]),s._v(" 和 "),e("code",[s._v("<iframe>")]),s._v(" 等元素加载的 Web Worker 和嵌套浏览上下文的有效来，不符合要求的请求将被用户代理视为致命的网络错误")]),s._v(" "),e("blockquote",[e("p",[s._v("如果要规范嵌套的浏览上下文和worker，应该分别使用"),e("code",[s._v("frame src")]),s._v("和"),e("code",[s._v("worker src")]),s._v("指令，而不是"),e("code",[s._v("child src")]),s._v("。")])]),s._v(" "),e("h5",{attrs:{id:"示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content="child-src https://www.baidu.com/; child-src unsafe-inline">\n</head>\n\n<body>\n \n<iframe src="https://a.com"></iframe> // 框架里的页面将无法加载\n\n<script>\n  var blockedWorker = new Worker("data:application/javascript,...");\n  console.log(blockWorker); 控制台将报错\n<\/script>\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h4",{attrs:{id:"connect-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#connect-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("connect-src")])]),s._v(" "),e("p",[s._v("限制可以通过脚本接口加载的url，受限制的API有")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("<a>")]),s._v("标签的"),e("code",[s._v("ping")]),s._v("属性")]),s._v(" "),e("li",[e("code",[s._v("WindowOrWorkerGlobalScope.fetch")])]),s._v(" "),e("li",[e("code",[s._v("XMLHttpRequest")])]),s._v(" "),e("li",[e("code",[s._v("EventSource")])]),s._v(" "),e("li",[e("code",[s._v("Navigator.sendBeacon()")])])]),s._v(" "),e("h5",{attrs:{id:"示例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content="connect-src https://www.baidu.com/; child-src unsafe-inline">\n</head>\n\n<body>\n \n// 以下链接都将不被允许\n\n<a ping="https://not-example.com">\n\n<script>\n  var xhr = new XMLHttpRequest();\n  xhr.open(\'GET\', \'https://not-example.com/\');\n  xhr.send();\n\n  var ws = new WebSocket("https://not-example.com/");\n\n  var es = new EventSource("https://not-example.com/");\n\n  navigator.sendBeacon("https://not-example.com/", { ... });\n<\/script>\n\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("h4",{attrs:{id:"default-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#default-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("default-src")])]),s._v(" "),e("p",[s._v("该指令用作其他 CSP 获取指令的后备。 对于其它指令，用户代理查找 "),e("code",[s._v("default-src")]),s._v(" 指令并为其使用此值")]),s._v(" "),e("h4",{attrs:{id:"font-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#font-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("font-src")])]),s._v(" "),e("p",[s._v("指令指定使用@font-face 加载的字体的有效来源。")]),s._v(" "),e("h5",{attrs:{id:"示例-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-3"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content="font-src https://www.baidu.com/; child-src unsafe-inline">\n\t\n\t// 以下字体将无法加载\n\n\n<style>\n  @font-face {\n    font-family: "MyFont";\n    src: url("https://not-example.com/font");\n  }\n  body {\n    font-family: "MyFont";\n  }\n</style>\n</head>\n\n<body>\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("h4",{attrs:{id:"frame-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frame-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("frame-src")])]),s._v(" "),e("p",[s._v("指定使用"),e("code",[s._v("<frame>")]),s._v("和"),e("code",[s._v("<iframe>")]),s._v("等元素加载嵌套浏览上下文的有效源。")]),s._v(" "),e("h5",{attrs:{id:"示例-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-4"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("p",[s._v("见 [[#child-src]]，将"),e("code",[s._v("<meta>")]),s._v("中"),e("code",[s._v("child-src")]),s._v("改为"),e("code",[s._v("frame-src")]),s._v("即可")]),s._v(" "),e("h4",{attrs:{id:"img-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#img-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("img-src")])]),s._v(" "),e("p",[s._v("指定图像和favicon的有效源")]),s._v(" "),e("h5",{attrs:{id:"特殊可选来源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊可选来源"}},[s._v("#")]),s._v(" 特殊可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("'strict-dynamic'")]),s._v("：严格的动态源代码表达式指定，通过使用nonce或hash将显式给予标记中存在的脚本的信任传播到该根脚本加载的所有脚本。同时，任何允许列表或源表达式（如“self”或“unsafe inline”）都将被忽略")]),s._v(" "),e("li",[e("code",[s._v("'report-sample'")]),s._v(":  要求在违规报告中包含违规代码的样本")])]),s._v(" "),e("h5",{attrs:{id:"示例-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-5"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content="\nimg-src https://www.baidu.com/; ">\n</head>\n\n<body>\n \n// 以下图片将无法加载\n\n<img src="https://not-example.com/foo.jpg" alt="example picture">\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h4",{attrs:{id:"manifest-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#manifest-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("manifest-src")])]),s._v(" "),e("p",[s._v("指定哪些manifest可以应用到资源。")]),s._v(" "),e("h5",{attrs:{id:"示例-6"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-6"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content="\nmanifest-src https://www.baidu.com/; ">\n\n// 以下清单文件将无法加载\n<link rel="manifest" href="https://not-example.com/manifest">\n\n\n</head>\n\n<body>\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h4",{attrs:{id:"media-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#media-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("media-src")])]),s._v(" "),e("p",[s._v("指定使用"),e("code",[s._v("<audio>")]),s._v("和"),e("code",[s._v("<video>")]),s._v("元素加载媒体的有效源。")]),s._v(" "),e("h5",{attrs:{id:"示例-7"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-7"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content=" \n\tmedia-src https://www.baidu.com/; ">\n\n</head>\n\n<body>\n\n// 以下音频与视频将不会被加载和播放\n\n<audio src="https://not-example.com/audio"></audio>\n\n<video src="https://not-example.com/video">\n  <track kind="subtitles" src="https://not-example.com/subtitles">\n</video>\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h4",{attrs:{id:"object-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#object-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("object-src")])]),s._v(" "),e("p",[s._v("指定"),e("code",[s._v("<object>")]),s._v("、"),e("code",[s._v("<embed>")]),s._v("和"),e("code",[s._v("<applet>")]),s._v("元素的有效源")]),s._v(" "),e("h5",{attrs:{id:"示例-8"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-8"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content=" \n\tobject-src https://www.baidu.com/; ">\n\n</head>\n\n<body>\n\n// 以下控件将不会被加载\n\n\n<embed src="https://not-example.com/flash"></embed>\n<object data="https://not-example.com/plugin"></object>\n<applet archive="https://not-example.com/java"></applet>\n\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h4",{attrs:{id:"prefetch-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prefetch-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("prefetch-src")])]),s._v(" "),e("p",[s._v("指令指定可以预取或预呈现的有效源")]),s._v(" "),e("h5",{attrs:{id:"示例-9"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-9"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content=" \n\tprefetch-src https://www.baidu.com/; ">\n\t\n\t// 以下资源将不会被预拉取或预渲染\n\t<link rel="prefetch" src="https://example.org/"></link>\n\t<link rel="prerender" src="https://example.org/"></link>\n\n</head>\n\n<body>\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h4",{attrs:{id:"script-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#script-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("script-src")])]),s._v(" "),e("p",[s._v("指令指定 JavaScript 的有效来源。 这不仅包括直接加载到 "),e("code",[s._v("<script>")]),s._v(" 元素中的 URL，还包括可以触发脚本执行的内联脚本事件处理程序 ("),e("code",[s._v("onclick")]),s._v(") 和 XSLT 样式表")]),s._v(" "),e("h5",{attrs:{id:"特殊可选来源-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊可选来源-2"}},[s._v("#")]),s._v(" 特殊可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("'strict-dynamic'")]),s._v("：严格的动态源代码表达式指定，通过使用nonce或hash将显式给予标记中存在的脚本的信任传播到该根脚本加载的所有脚本。同时，任何允许列表或源表达式（如“self”或“unsafe inline”）都将被忽略")]),s._v(" "),e("li",[e("code",[s._v("'report-sample'")]),s._v(":  要求在违规报告中包含违规代码的样本")])]),s._v(" "),e("h5",{attrs:{id:"示例-10"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-10"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content=" \n\tscript-src https://www.baidu.com/; ">\n\t\n\t// 以下资源将不会被预拉取或预渲染\n\t<link rel="prefetch" src="https://example.org/"></link>\n\t<link rel="prerender" src="https://example.org/"></link>\n\n</head>\n\n<body>\n\n// 以下脚本将不会被加载或执行\n\n\n<script src="https://not-example.com/js/library.js"><\/script>\n\n\n<button id="btn" onclick="doSomething()">\n\n// 但是可以通过addEventListener方法来调用\n\n\ndocument.getElementById("btn").addEventListener(\'click\', doSomething);\n\n\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br")])]),e("h4",{attrs:{id:"style-src"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#style-src"}},[s._v("#")]),s._v(" "),e("code",[s._v("style-src")])]),s._v(" "),e("p",[s._v("指定样式表的有效源")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<head>\n\t<meta http-equiv="content-security-policy" content=" \n\tstyle-src https://www.baidu.com/; ">\n\t\n\t// 以下样式表将不会被加载或应用\n\t\n\t<link href="https://not-example.com/styles/main.css" rel="stylesheet" type="text/css" />\n\n\t<style>\n\t#inline-style { background: red; }\n\t</style>\n\n\t<style>\n\t  @import url("https://not-example.com/styles/print.css") print;\n\t</style>\n\n\n</head>\n\n<body>\n\n</body>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("h3",{attrs:{id:"文档型指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#文档型指令"}},[s._v("#")]),s._v(" 文档型指令")]),s._v(" "),e("h4",{attrs:{id:"base-uri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#base-uri"}},[s._v("#")]),s._v(" "),e("code",[s._v("base-uri")])]),s._v(" "),e("p",[s._v("限制可在文档的"),e("code",[s._v("<base>")]),s._v("元素中使用的URL")]),s._v(" "),e("h5",{attrs:{id:"特殊可选来源-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊可选来源-3"}},[s._v("#")]),s._v(" 特殊可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("'strict-dynamic'")]),s._v("：严格的动态源代码表达式指定，通过使用nonce或hash将显式给予标记中存在的脚本的信任传播到该根脚本加载的所有脚本。同时，任何允许列表或源表达式（如“self”或“unsafe inline”）都将被忽略")]),s._v(" "),e("li",[e("code",[s._v("'report-sample'")]),s._v(":  要求在违规报告中包含违规代码的样本")])]),s._v(" "),e("h5",{attrs:{id:"示例-11"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-11"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<meta http-equiv="Content-Security-Policy" content="base-uri \'self\'">\n\n// 控制台将会报错，改配置将不会被应用\n<base href="https://example.com/">\n\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h4",{attrs:{id:"sendbox"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sendbox"}},[s._v("#")]),s._v(" "),e("code",[s._v("sendbox")])]),s._v(" "),e("p",[s._v("为请求的资源启用沙盒，类似于"),e("code",[s._v("<iframe>")]),s._v("沙盒属性。它对页面的操作应用限制，包括阻止弹出窗口、阻止插件和脚本的执行以及强制执行同一源策略。")]),s._v(" "),e("h5",{attrs:{id:"允许的配置值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#允许的配置值"}},[s._v("#")]),s._v(" 允许的配置值")]),s._v(" "),e("p",[e("strong",[s._v("不允许应用上文的[[#可选来源]]")])]),s._v(" "),e("ul",[e("li",[e("code",[s._v("allow-downloads")]),s._v(": 允许在用户单击按钮或链接后下载")]),s._v(" "),e("li",[e("code",[s._v("allow-forms")]),s._v(": 允许页面提交表单。 如果不使用该关键字，则不允许进行此操作")]),s._v(" "),e("li",[e("code",[s._v("allow-modals")]),s._v(": 允许页面打开模式窗口")]),s._v(" "),e("li",[e("code",[s._v("allow-orientation-lock")]),s._v(": 允许页面禁用锁定屏幕方向的功能")]),s._v(" "),e("li",[e("code",[s._v("allow-pointer-lock")]),s._v(": 允许页面使用指针锁 API")]),s._v(" "),e("li",[e("code",[s._v("allow-popups")]),s._v(':  允许弹出窗口（例如来自 window.open、target="_blank"、showModalDialog）。 如果未使用此关键字，则该功能将默默地失败。')]),s._v(" "),e("li",[e("code",[s._v("allow-popups-to-escape-sandbox")]),s._v(" 允许沙盒文档打开新窗口，而无需对其强制使用沙盒标志。例如，这将允许安全地对第三方广告进行沙盒处理，而无需对登录页施加相同的限制。")]),s._v(" "),e("li",[e("code",[s._v("allow-presentation")]),s._v(". 允许嵌入程序控制"),e("code",[s._v("iframe")]),s._v("是否可以启动表示会话")]),s._v(" "),e("li",[e("code",[s._v("allow-same-origin")]),s._v(" 允许将内容视为来自其正常来源。如果不使用此关键字，则嵌入的内容将被视为来自唯一的来源")]),s._v(" "),e("li",[e("code",[s._v("allow-scripts")]),s._v(": 允许页面运行脚本（但不创建弹出窗口）。如果不使用此关键字，则不允许此操作")]),s._v(" "),e("li",[e("code",[s._v("allow-top-navigation")]),s._v(": 允许页面将内容导航（加载）到顶级浏览上下文。如果不使用此关键字，则不允许此操作。")]),s._v(" "),e("li",[e("code",[s._v("allow-top-navigation-by-user-activation")]),s._v(" 允许资源浏览顶级浏览上下文，但只有在用户手势启动时才允许")])]),s._v(" "),e("h3",{attrs:{id:"导航型指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导航型指令"}},[s._v("#")]),s._v(" 导航型指令")]),s._v(" "),e("h4",{attrs:{id:"form-action"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#form-action"}},[s._v("#")]),s._v(" "),e("code",[s._v("form-action")])]),s._v(" "),e("p",[s._v("限制表单提交目标的URL")]),s._v(" "),e("h5",{attrs:{id:"特殊可选来源-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特殊可选来源-4"}},[s._v("#")]),s._v(" 特殊可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("'strict-dynamic'")]),s._v("：严格的动态源代码表达式指定，通过使用nonce或hash将显式给予标记中存在的脚本的信任传播到该根脚本加载的所有脚本。同时，任何允许列表或源表达式（如“self”或“unsafe inline”）都将被忽略")]),s._v(" "),e("li",[e("code",[s._v("'report-sample'")]),s._v(":  要求在违规报告中包含违规代码的样本")])]),s._v(" "),e("h5",{attrs:{id:"示例-12"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例-12"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('<meta http-equiv="Content-Security-Policy" content="form-action \'none\'">\n\n// 此表单将无法提交\n<form action="javascript:alert(\'Foo\')" id="form1" method="post">\n  <input type="text" name="fieldName" value="fieldValue">\n  <input type="submit" id="submit" value="submit">\n</form>\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h4",{attrs:{id:"frame-ancestors"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frame-ancestors"}},[s._v("#")]),s._v(" "),e("code",[s._v("frame-ancestors")])]),s._v(" "),e("p",[s._v("指定可以使用"),e("code",[s._v("<frame>")]),s._v("、"),e("code",[s._v("<iframe>")]),s._v("、"),e("code",[s._v("<object>")]),s._v("、"),e("code",[s._v("<embed>")]),s._v("或"),e("code",[s._v("<applet>")]),s._v("嵌入页面的有效父级")]),s._v(" "),e("h5",{attrs:{id:"可选来源-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可选来源-2"}},[s._v("#")]),s._v(" 可选来源")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("<host-source>")])]),s._v(" "),e("li",[e("code",[s._v("<scheme-source>")])]),s._v(" "),e("li",[e("code",[s._v("'self'")])]),s._v(" "),e("li",[e("code",[s._v("'none'")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);