<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>当小数遇上二进制——全面解析JS中的小数二进制计算（附赠0.1+0.2 !== 0.3问题解释） | 林中路</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="二进制小数如何转换为十进制
二进制转换十进制的方法是：
从二进制数的最低位开始，每一位乘以对应的2的幂数，然后将最终的结果小数部分与整数部分分别相加
对应的2的幂，以个位为0，向高位依次增1，向地位依次减1；
举个例子： 以二进制小数1100.0011为例：
| 二进制小数位 | 1                 | 1 ...">
    
    <link rel="preload" href="/assets/css/0.styles.6d0d6f13.css" as="style"><link rel="preload" href="/assets/js/app.cd8205c8.js" as="script"><link rel="preload" href="/assets/js/11.4c288b74.js" as="script"><link rel="preload" href="/assets/js/26.cc4cf83e.js" as="script"><link rel="prefetch" href="/assets/js/1.c492b4cd.js"><link rel="prefetch" href="/assets/js/10.5c791580.js"><link rel="prefetch" href="/assets/js/100.98ff7760.js"><link rel="prefetch" href="/assets/js/101.e5cd16d7.js"><link rel="prefetch" href="/assets/js/102.cc9bc85b.js"><link rel="prefetch" href="/assets/js/103.7b07b598.js"><link rel="prefetch" href="/assets/js/104.ee58d457.js"><link rel="prefetch" href="/assets/js/105.48c57f25.js"><link rel="prefetch" href="/assets/js/106.b702757c.js"><link rel="prefetch" href="/assets/js/107.8122f1ef.js"><link rel="prefetch" href="/assets/js/108.51e66dbe.js"><link rel="prefetch" href="/assets/js/109.3145253b.js"><link rel="prefetch" href="/assets/js/110.f9990065.js"><link rel="prefetch" href="/assets/js/111.3263bd3f.js"><link rel="prefetch" href="/assets/js/112.9071b5e2.js"><link rel="prefetch" href="/assets/js/113.f131242e.js"><link rel="prefetch" href="/assets/js/114.7a6e09f7.js"><link rel="prefetch" href="/assets/js/115.508d99ac.js"><link rel="prefetch" href="/assets/js/116.f4900a92.js"><link rel="prefetch" href="/assets/js/117.e5957144.js"><link rel="prefetch" href="/assets/js/118.062eb3c1.js"><link rel="prefetch" href="/assets/js/119.93634bcc.js"><link rel="prefetch" href="/assets/js/12.c3b16095.js"><link rel="prefetch" href="/assets/js/120.1bada0ab.js"><link rel="prefetch" href="/assets/js/121.7d55e294.js"><link rel="prefetch" href="/assets/js/122.b7f7c837.js"><link rel="prefetch" href="/assets/js/123.3a0b4694.js"><link rel="prefetch" href="/assets/js/124.bd458b77.js"><link rel="prefetch" href="/assets/js/125.8ca612c9.js"><link rel="prefetch" href="/assets/js/126.35bccb3e.js"><link rel="prefetch" href="/assets/js/127.9b3097f5.js"><link rel="prefetch" href="/assets/js/128.5833cf40.js"><link rel="prefetch" href="/assets/js/129.38ec9907.js"><link rel="prefetch" href="/assets/js/13.91404f5a.js"><link rel="prefetch" href="/assets/js/130.932a54c4.js"><link rel="prefetch" href="/assets/js/131.f4ab894a.js"><link rel="prefetch" href="/assets/js/14.ef93462f.js"><link rel="prefetch" href="/assets/js/15.83829c35.js"><link rel="prefetch" href="/assets/js/16.d245c760.js"><link rel="prefetch" href="/assets/js/17.4a9f3c99.js"><link rel="prefetch" href="/assets/js/18.75ce45c7.js"><link rel="prefetch" href="/assets/js/19.b86d35ae.js"><link rel="prefetch" href="/assets/js/20.9657eb2e.js"><link rel="prefetch" href="/assets/js/21.f89cf353.js"><link rel="prefetch" href="/assets/js/22.746aec5f.js"><link rel="prefetch" href="/assets/js/23.ca2ee980.js"><link rel="prefetch" href="/assets/js/24.e1eeb0f4.js"><link rel="prefetch" href="/assets/js/25.f96e0147.js"><link rel="prefetch" href="/assets/js/27.f940e542.js"><link rel="prefetch" href="/assets/js/28.99771a3c.js"><link rel="prefetch" href="/assets/js/29.841b64b0.js"><link rel="prefetch" href="/assets/js/30.772e1ff4.js"><link rel="prefetch" href="/assets/js/31.7e0b62c5.js"><link rel="prefetch" href="/assets/js/32.cf3d5fb6.js"><link rel="prefetch" href="/assets/js/33.b338e29a.js"><link rel="prefetch" href="/assets/js/34.8b8356fe.js"><link rel="prefetch" href="/assets/js/35.1b12a1f7.js"><link rel="prefetch" href="/assets/js/36.547e2f8d.js"><link rel="prefetch" href="/assets/js/37.36a240bd.js"><link rel="prefetch" href="/assets/js/38.4f6b92e3.js"><link rel="prefetch" href="/assets/js/39.5133d0dd.js"><link rel="prefetch" href="/assets/js/4.524efd0b.js"><link rel="prefetch" href="/assets/js/40.8c765af6.js"><link rel="prefetch" href="/assets/js/41.b7234e21.js"><link rel="prefetch" href="/assets/js/42.b5ac212a.js"><link rel="prefetch" href="/assets/js/43.5d1b3b6c.js"><link rel="prefetch" href="/assets/js/44.eda633f8.js"><link rel="prefetch" href="/assets/js/45.39f5263b.js"><link rel="prefetch" href="/assets/js/46.f1fbfada.js"><link rel="prefetch" href="/assets/js/47.ed969447.js"><link rel="prefetch" href="/assets/js/48.e1867366.js"><link rel="prefetch" href="/assets/js/49.c2a4bc6b.js"><link rel="prefetch" href="/assets/js/5.a180cf14.js"><link rel="prefetch" href="/assets/js/50.da77d6a3.js"><link rel="prefetch" href="/assets/js/51.4183e6ab.js"><link rel="prefetch" href="/assets/js/52.b18add11.js"><link rel="prefetch" href="/assets/js/53.08c1d448.js"><link rel="prefetch" href="/assets/js/54.9edeb19b.js"><link rel="prefetch" href="/assets/js/55.9a3ed63e.js"><link rel="prefetch" href="/assets/js/56.dcf34dca.js"><link rel="prefetch" href="/assets/js/57.2123aa49.js"><link rel="prefetch" href="/assets/js/58.c9833b3b.js"><link rel="prefetch" href="/assets/js/59.8da7c174.js"><link rel="prefetch" href="/assets/js/6.529edc8a.js"><link rel="prefetch" href="/assets/js/60.9a70415e.js"><link rel="prefetch" href="/assets/js/61.35935df8.js"><link rel="prefetch" href="/assets/js/62.0e63cfe7.js"><link rel="prefetch" href="/assets/js/63.a52d5a72.js"><link rel="prefetch" href="/assets/js/64.cf7dfcc7.js"><link rel="prefetch" href="/assets/js/65.0220a5ee.js"><link rel="prefetch" href="/assets/js/66.5cd774f3.js"><link rel="prefetch" href="/assets/js/67.d8943555.js"><link rel="prefetch" href="/assets/js/68.7cf24f78.js"><link rel="prefetch" href="/assets/js/69.56501738.js"><link rel="prefetch" href="/assets/js/7.ac95b826.js"><link rel="prefetch" href="/assets/js/70.9626260f.js"><link rel="prefetch" href="/assets/js/71.a466c6f1.js"><link rel="prefetch" href="/assets/js/72.0a678f77.js"><link rel="prefetch" href="/assets/js/73.597ea695.js"><link rel="prefetch" href="/assets/js/74.a0387d5c.js"><link rel="prefetch" href="/assets/js/75.97871f2e.js"><link rel="prefetch" href="/assets/js/76.7d8e44c7.js"><link rel="prefetch" href="/assets/js/77.b53c8e31.js"><link rel="prefetch" href="/assets/js/78.9fef1461.js"><link rel="prefetch" href="/assets/js/79.9af76496.js"><link rel="prefetch" href="/assets/js/8.6bb76bea.js"><link rel="prefetch" href="/assets/js/80.5f7ee3db.js"><link rel="prefetch" href="/assets/js/81.1937e784.js"><link rel="prefetch" href="/assets/js/82.2bdeb675.js"><link rel="prefetch" href="/assets/js/83.e04a8620.js"><link rel="prefetch" href="/assets/js/84.ca8713d0.js"><link rel="prefetch" href="/assets/js/85.40f655ff.js"><link rel="prefetch" href="/assets/js/86.87397155.js"><link rel="prefetch" href="/assets/js/87.798cdf26.js"><link rel="prefetch" href="/assets/js/88.e089f692.js"><link rel="prefetch" href="/assets/js/89.5d842e18.js"><link rel="prefetch" href="/assets/js/9.5b2ac283.js"><link rel="prefetch" href="/assets/js/90.4157be98.js"><link rel="prefetch" href="/assets/js/91.7ed6afe7.js"><link rel="prefetch" href="/assets/js/92.9c50ce3b.js"><link rel="prefetch" href="/assets/js/93.e8e16a70.js"><link rel="prefetch" href="/assets/js/94.cf98a377.js"><link rel="prefetch" href="/assets/js/95.a4b78938.js"><link rel="prefetch" href="/assets/js/96.a7a9f018.js"><link rel="prefetch" href="/assets/js/97.f96c42c9.js"><link rel="prefetch" href="/assets/js/98.ce7378e5.js"><link rel="prefetch" href="/assets/js/99.24959418.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.706cf0ce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d0d6f13.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><div class="header"><div class="blog-info" data-v-54e0dde5>
   林中路
   <p data-v-54e0dde5>少有人走的路，逐渐向世界显现</p></div> <div class="blog-author-info" data-v-51bc2051><p class="author-head-img" data-v-51bc2051><img src="/assets/img/head-img.8e2d0100.png" alt data-v-51bc2051></p></div> <div class="blog-category-list" data-v-581efa6b><ul data-v-581efa6b></ul></div></div> <div class="content"><div class="template-container" data-v-b70586ba><div class="content" data-v-b70586ba><div class="content__default" data-v-b70586ba><h1 id="当小数遇上二进制-全面解析js中的小数二进制计算-附赠0-1-0-2-0-3问题解释"><a href="#当小数遇上二进制-全面解析js中的小数二进制计算-附赠0-1-0-2-0-3问题解释" class="header-anchor">#</a> 当小数遇上二进制——全面解析JS中的小数二进制计算（附赠0.1+0.2 !== 0.3问题解释）</h1> <h2 id="二进制小数如何转换为十进制"><a href="#二进制小数如何转换为十进制" class="header-anchor">#</a> 二进制小数如何转换为十进制</h2> <p>二进制转换十进制的方法是：</p> <ul><li>从二进制数的最低位开始，每一位乘以对应的2的幂数，然后将最终的结果小数部分与整数部分分别相加</li> <li>对应的2的幂，以个位为0，向高位依次增1，向地位依次减1；</li></ul> <p>举个例子： 以二进制小数<code>1100.0011</code>为例：</p> <table><thead><tr><th>二进制小数位</th> <th>1</th> <th>1</th> <th>0</th> <th>0</th> <th>.</th> <th>0</th> <th>0</th> <th>1</th> <th>1</th></tr></thead> <tbody><tr><td>对应2的幂</td> <td>3</td> <td>2</td> <td>1</td> <td>0</td> <td>.</td> <td>-1</td> <td>-2</td> <td>-3</td> <td>-4</td></tr> <tr><td>乘幂计算</td> <td>1 * 2<sup>3</sup></td> <td>1 * 2<sup>2</sup></td> <td>0 * 2<sup>1</sup></td> <td>0 * 2<sup>0</sup></td> <td>.</td> <td>0 * 2<sup>-1</sup></td> <td>0 * 2<sup>-2</sup></td> <td>1 * 2<sup>-3</sup></td> <td>1 * 2<sup>-4</sup></td></tr> <tr><td>结果</td> <td>8</td> <td>4</td> <td>0</td> <td>0</td> <td>.</td> <td>0</td> <td>0</td> <td>0.125</td> <td>0.0625</td></tr></tbody></table> <p>当幂为负数时，乘幂计算实际上就是除以对应幂数的倒数，即1 *  2<sup>-3</sup>  = 1 / 2<sup>3</sup>  = 1/8 = 0.125;</p> <p>所以最终的结果就是 8 + 4 . 0.125 + 0.0625 = 12.1875;</p> <p>我们在浏览器控制台验证一下，看是否正确:</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/202109271058663.png" alt="image-20210927105831566"></p> <p>二进制转十进制<code>javascript</code>实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// 这里参数n要直接传入二进制小数的字符串形式，</span>
<span class="token comment">//如果直接传入一个二进制小数，无论是利用'' +n 还是利用String(n)去转字符串，都会将原值截断，只保留19位，导致最后计算错误</span>
<span class="token keyword">function</span> <span class="token function">BinToDec</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token comment">// let arr = ('' + n).split('.');  这样会导致计算错误。</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">let</span> <span class="token constant">ZS</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token constant">XS</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> zsSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> xsSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token constant">ZS</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token constant">ZS</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zsSum <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">*</span> num<span class="token punctuation">;</span>
        i<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token constant">XS</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token constant">XS</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token constant">XS</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            xsSum <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span>j<span class="token punctuation">)</span> <span class="token operator">*</span> num<span class="token punctuation">;</span>
            j<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> zsSum <span class="token operator">+</span> xsSum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="十进制小数如何转为二进制小数"><a href="#十进制小数如何转为二进制小数" class="header-anchor">#</a> 十进制小数如何转为二进制小数</h2> <p>十进制小数转换为二进制是整数部分与小数部分分别计算，然后再相加的。</p> <h3 id="整数十进制转二进制-除2取余法【短除法】"><a href="#整数十进制转二进制-除2取余法【短除法】" class="header-anchor">#</a> 整数十进制转二进制 —— 除2取余法【短除法】</h3> <p>不断除以2，直到商为0，每一步得到的余数依次由低到高填充到二进制的位置里。</p> <p>因为任何一个十进制除以2的余数要么是1，要么是0，所以最后这些余数就构成了最后的二进制数。</p> <p>比如将<code>174</code> 这个数字转换为二进制的过程：</p> <table><thead><tr><th style="text-align:center;">除以2</th> <th style="text-align:center;">商</th> <th style="text-align:center;">余数</th> <th style="text-align:center;">二进制第几位</th></tr></thead> <tbody><tr><td style="text-align:center;">174/2</td> <td style="text-align:center;">87</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">87/2</td> <td style="text-align:center;">43</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">43/2</td> <td style="text-align:center;">21</td> <td style="text-align:center;">1</td> <td style="text-align:center;">2</td></tr> <tr><td style="text-align:center;">21/2</td> <td style="text-align:center;">10</td> <td style="text-align:center;">1</td> <td style="text-align:center;">3</td></tr> <tr><td style="text-align:center;">10/2</td> <td style="text-align:center;">5</td> <td style="text-align:center;">0</td> <td style="text-align:center;">4</td></tr> <tr><td style="text-align:center;">5/2</td> <td style="text-align:center;">2</td> <td style="text-align:center;">1</td> <td style="text-align:center;">5</td></tr> <tr><td style="text-align:center;">2/2</td> <td style="text-align:center;">1</td> <td style="text-align:center;">0</td> <td style="text-align:center;">6</td></tr> <tr><td style="text-align:center;">1/2</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">7</td></tr></tbody></table> <p>所以，得到十进制174转换为二进制为： <code>10101110</code> (注意由高位到低位书写，和表格中计算得到的顺序相反)</p> <p>用<code>javascript</code> 递归实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>：

<span class="token comment">/**
    * [integerToBin 整数转二进制]
    *
    * @param   {[type]}       n    [n description]
    *
    * @return  {[]}                [return description]
    */</span>
   <span class="token keyword">function</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">// 如果商大于0，继续递归调用，否则返回空字符串用于与前面的结果连接</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 获得数字除2后的商</span>
            <span class="token keyword">let</span> quotient <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span> n <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> remainder <span class="token operator">=</span> n <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span>quotient<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">''</span> <span class="token operator">+</span> remainder<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="小数十进制转二进制-乘2取整法"><a href="#小数十进制转二进制-乘2取整法" class="header-anchor">#</a> 小数十进制转二进制——乘2取整法</h3> <ol><li><p>将小数的小数部分取出，乘以2，将得到的结果中的整数部分作为二进制小数的项</p></li> <li><p>得到结果中的小数部分重复第一步的步骤</p></li> <li><p>直到某一步乘以2的值的小数部分为0，或者小数部分形成循环小数则停止</p> <p>比如 <code>0.1875</code>这个十进制小数，计算转换为二进制的过程：</p> <table><thead><tr><th style="text-align:center;">乘以2</th> <th style="text-align:center;">积</th> <th style="text-align:center;">整数部分</th> <th>小数部分</th></tr></thead> <tbody><tr><td style="text-align:center;">0.1875 * 2</td> <td style="text-align:center;">0.375</td> <td style="text-align:center;">0</td> <td>0.375</td></tr> <tr><td style="text-align:center;">0.375 * 2</td> <td style="text-align:center;">0.75</td> <td style="text-align:center;">0</td> <td>0.75</td></tr> <tr><td style="text-align:center;">0.75 * 2</td> <td style="text-align:center;">1.5</td> <td style="text-align:center;">1</td> <td>0.5</td></tr> <tr><td style="text-align:center;">0.5 * 2</td> <td style="text-align:center;">1.0</td> <td style="text-align:center;">1</td> <td>0</td></tr></tbody></table> <p>得到结果为：<code>0011</code> (与整数转换不同，这里是顺序)</p> <p>用<code>javascript</code> 的递归实现：</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
     * [fracToBin 小数转二进制]
     *
     * @param   {[type]}       n     [n 需要转换为二进制的小数]
     * @param   {[type]}       bits  [bits 准换后的二进制小数的位数]
     * @param   {undefined[]}  bin   [arr 转换后的二进制小数，默认为空]
     *
     * @return  {[]}                 [return description]
     */</span>
     <span class="token keyword">function</span> <span class="token function">fracToBin</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> bits <span class="token operator">=</span> <span class="token number">49</span><span class="token punctuation">,</span> bin <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果二进制位小于给定的位数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>bin<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> bits<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 1. 将需要转换的小数分为整数部分与小数部分，获得小数部分</span>
            <span class="token keyword">let</span> xs <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// 2. 小数部分乘以2</span>
            <span class="token comment">//  2.1小数部分字符串转数字</span>
            <span class="token keyword">let</span> xsNumber <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'0.'</span> <span class="token operator">+</span> xs<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 2.2 小数部分乘以2</span>
            <span class="token keyword">let</span> a <span class="token operator">=</span> xsNumber <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token comment">// 3. 取出数字的整数部分拼接到二进制小数的结果中</span>
            <span class="token keyword">let</span> ta <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bin <span class="token operator">+=</span> ta<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> na <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'0.'</span> <span class="token operator">+</span> ta<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果小数部分等于0，则返回</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>na<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> bin<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 否则递归</span>
            <span class="token keyword">return</span> <span class="token function">fracToBin</span><span class="token punctuation">(</span>na<span class="token punctuation">,</span> bits<span class="token punctuation">,</span> bin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bin<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>用代码表示十进制转换二进制的整体计算过程：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
   <span class="token comment">/**
    * [DecToBin 十进制转二进制]
    *
    * @param   {[type]}  n  [n description]
    *
    * @return  {[type]}     [return description]
    */</span>
   <span class="token keyword">function</span> <span class="token function">DecToBin</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> inter<span class="token punctuation">,</span> frac<span class="token punctuation">;</span>
        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">''</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        inter <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'0'</span> <span class="token operator">?</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        frac <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">'.'</span> <span class="token operator">+</span> <span class="token function">fracToBin</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'0.'</span> <span class="token operator">+</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>inter<span class="token punctuation">,</span> frac<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token function">DecToBin</span><span class="token punctuation">(</span><span class="token number">2.3555</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>当然，以上代码仅用于展示十进制小数转换为二进制小数的过程，实际开发中，我们可以直接像下面这样转换：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">2.3555</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="二进制小数的存储"><a href="#二进制小数的存储" class="header-anchor">#</a> 二进制小数的存储</h2> <h3 id="浮点数"><a href="#浮点数" class="header-anchor">#</a> 浮点数</h3> <p>我们将二进制小数算出来还不算完，还要明白计算机中如何存储二进制小数的。</p> <p>小数，在计算机语言里，准确应该叫做浮点数。</p> <p>而浮点数根据精确度不同分为很多种，最常用的有两种：</p> <ul><li>单精度浮点数，采用32位二进制位存储</li> <li>双精度浮点数，采用64位二进制位存储</li></ul> <h3 id="浮点数精度"><a href="#浮点数精度" class="header-anchor">#</a> 浮点数精度</h3> <p>所谓精度，就是二进制数能够表达的数的精确度，在计算机中，二进制的存储存在着浮点数精度丢失的风险。</p> <p>我们来看下小数点后四位能够用二进制所表示的十进制数：</p> <table><thead><tr><th>二进制数</th> <th>对应的十进制数</th></tr></thead> <tbody><tr><td>0.0000</td> <td>0</td></tr> <tr><td>0.0001</td> <td>0.0625</td></tr> <tr><td>0.0010</td> <td>0.125</td></tr> <tr><td>0.0011</td> <td>0.1875</td></tr> <tr><td>0.0100</td> <td>0.25</td></tr> <tr><td>0.0101</td> <td>0.3125</td></tr> <tr><td>0.0110</td> <td>0.375</td></tr> <tr><td>0.0111</td> <td>0.4375</td></tr> <tr><td>0.1000</td> <td>0.5</td></tr> <tr><td>0.1001</td> <td>0.5625</td></tr> <tr><td>0.1010</td> <td>0.625</td></tr> <tr><td>0.1011</td> <td>0.6875</td></tr> <tr><td>0.1100</td> <td>0.75</td></tr> <tr><td>0.1101</td> <td>0.8125</td></tr> <tr><td>0.1110</td> <td>0.875</td></tr> <tr><td>0.1111</td> <td>0.9375</td></tr></tbody></table> <p>这里，左面这一列的二进制数是连续的，它已经穷尽了四位二进制所能表达的所有二进制数</p> <p>但右边十进制这一列却不是连贯的。</p> <p>想象一下，我们如何使用四位二进制来展示 0.0715这个数字？</p> <p>答案是，我们无法用四位二进制来表示，甚至无法用有限的二进制位来表示，按照我们上面介绍过的十进制小数转换为二进制小数的方法，它将得到一个无限小数，然而计算机存储是有上限的，不可能给它无数个位来存储，所以就会将超出最高存储位数上限的部分给截掉，这就是精度丢失的原因。</p> <h3 id="浮点数存储"><a href="#浮点数存储" class="header-anchor">#</a> 浮点数存储</h3> <p>根据IEEE 754规范，计算机对浮点数的存储总共分为三部分：</p> <p><strong>符号位 +  指数位 + 尾数位</strong></p> <p>每部分的位数根据精度不同而不同，比如</p> <ul><li>32位单精度浮点数的存储格式： 1位符号位 +  8 位指数位 + 23 位尾数位</li> <li>64位双精度浮点数的存储格式： 1位符号位 + 11位指数位 + 52位尾数位</li></ul> <p>上述三部分我们分别解释下：</p> <ul><li><p>符号位，代表数字的正负，为【1】时表示【负数】，为【0】时表示【正数或者0】</p></li> <li><p>尾数位</p> <p>我们都知道，一个十进制数可以使用多种方式表达，比如<code>3.14</code>这个十进制数，他可以表达为以下几种形式：</p> <ul><li>314 * 10<sup>-2</sup></li> <li>0.314 * 10<sup>1</sup></li> <li>0.00314 * 10<sup>3</sup></li></ul> <p>为了方便计算机处理，科学家们就规定了一个对于十进制数统一的表示规则：小数点前面是0，小数点后面第1位不能是0.</p> <p>所以所有十进制数有了相同的表达形式：</p> <ul><li>3.14 =&gt; 0.314 * 10<sup>1</sup></li> <li>175 =&gt; 0.175 * 10<sup>3</sup></li> <li>0.003 =&gt; 0.3 * 10<sup>-2</sup></li></ul> <p>同样地，二进制小数也可以有多种表达形式，比如<code>10.10</code>这个二进制数，可以表达为：</p> <ul><li><code>10.10</code> * 2<sup>0</sup></li> <li><code>1.010</code> * 2<sup>1</sup></li> <li><code>101.0</code> * 2<sup>-1</sup></li></ul> <p>为了计算机方便处理，计算机科学家规定了对于一个二进制小数的表示规则： 将小数点前面的值固定为1，并且确保小数点后面的长度为规定的精度的尾数位数。</p> <p>所以所有的二进制小数就有了相同的表达形式（以32位精度为例，其尾数尾数位23位）：</p> <ul><li>10.10  =&gt;  <code>1.01000000000000000000000</code> * 2<sup>1</sup></li> <li>0.0010  =&gt; <code>1.00000000000000000000000</code> * 2<sup>-3</sup></li> <li>100.1 =&gt;  <code>1.00100000000000000000000</code> * 2<sup>2</sup></li></ul> <p>而且既然规定了所有数字的整数各位都是1，那么为了节省存储空间，这个1就可以省略了，最后仅保留小数部分，就是这个二进制小数的尾数，以上面三个为例：</p> <ul><li>10.10的尾数： 01000000000000000000000；</li> <li>0.0010的尾数： 00000000000000000000000；</li> <li>100.1 的尾数： 00100000000000000000000；</li></ul></li> <li><p>指数位</p> <ul><li><p>指数位采用EXCESS系统表现</p></li> <li><p><strong>EXCESS 系统表现</strong>是指，通过将指数部分表示范围的中间值设为 0，使得负数不 需要用符号来表示</p></li> <li><p>拿扑克牌距离，比如我们有从A到K十三张扑克牌，现在我们以中间的 7 为 0，则根据EXCESS系统，形成了以下对应关系：</p> <table><thead><tr><th>牌面值</th> <th>EXCESS系统值</th></tr></thead> <tbody><tr><td>A</td> <td>-6</td></tr> <tr><td>2</td> <td>-5</td></tr> <tr><td>3</td> <td>-4</td></tr> <tr><td>4</td> <td>-3</td></tr> <tr><td>5</td> <td>-2</td></tr> <tr><td>6</td> <td>-1</td></tr> <tr><td>7</td> <td>0</td></tr> <tr><td>8</td> <td>1</td></tr> <tr><td>9</td> <td>2</td></tr> <tr><td>10</td> <td>3</td></tr> <tr><td>J</td> <td>4</td></tr> <tr><td>Q</td> <td>5</td></tr> <tr><td>K</td> <td>6</td></tr></tbody></table></li> <li><p>同样地，但精度为32位时，指数位为8位，它能表示的最大二进制数为<code>11111111</code>，即255，我们取它中间的数，即使用<code>11111111</code> 除以2，得到二进制数<code>01111111</code>（二进制中，一个数除以2实际上就是右移一位，左面补0），<code>01111111</code>的十进制数对应的是127，根据EXCESS系统要求，我们将中间值127表示为0， 则最终会形成类似下面的表示</p> <table><thead><tr><th>二进制值</th> <th>十进制值</th> <th>EXCESS值</th></tr></thead> <tbody><tr><td>……</td> <td>……</td> <td>……</td></tr> <tr><td>1111100</td> <td>124</td> <td>-3</td></tr> <tr><td>1111101</td> <td>125</td> <td>-2</td></tr> <tr><td>1111110</td> <td>126</td> <td>-1</td></tr> <tr><td>01111111</td> <td>127</td> <td>0</td></tr> <tr><td>10000000</td> <td>128</td> <td>1</td></tr> <tr><td>10000001</td> <td>129</td> <td>2</td></tr> <tr><td>10000010</td> <td>130</td> <td>3</td></tr> <tr><td>……</td> <td>……</td> <td>……</td></tr></tbody></table></li> <li><p>所以上例中的三个数字的对应指数位分别是：（使用小数通用表示规则写出后，指数是2的n次方，这里的n代表EXCESS值，而指数位存储的则是对应的二进制值）</p> <ul><li>10.10的指数位：10000000</li> <li>0.0010的指数位：1111100</li> <li>100.1的指数位： 10000001</li></ul></li></ul> <p>所以，上面三个小数<code>10.10</code>，<code>0.0010</code>，<code>100.1</code>，最终的二进制存储为（按照32位精度）：</p> <table><thead><tr><th>二进制小数</th> <th>统一表达</th> <th>正负</th> <th>指数</th> <th>符号位</th> <th>指数位</th> <th>尾数位</th></tr></thead> <tbody><tr><td>10.10</td> <td><code>1.01000000000000000000000</code> * 2<sup>1</sup></td> <td>正</td> <td>1</td> <td>0</td> <td>10000000</td> <td>01000000000000000000000</td></tr> <tr><td>0.0010</td> <td><code>1.00000000000000000000000</code> * 2<sup>-3</sup></td> <td>正</td> <td>-3</td> <td>0</td> <td>1111100</td> <td>00000000000000000000000</td></tr> <tr><td>100.1</td> <td><code>1.00100000000000000000000</code> * 2<sup>2</sup></td> <td>正</td> <td>2</td> <td>0</td> <td>10000001</td> <td>00100000000000000000000</td></tr></tbody></table> <p>最终存储的二进制值就是 符号位+指数位+尾数位。</p> <p>上表是32位精度下的存储，64位精度时的尾数为52位，指数中间值是01111111111 （即十进制的1023）对应EXCESS系统的0。其它以此类推。</p></li></ul> <h2 id="二进制知识实战巩固"><a href="#二进制知识实战巩固" class="header-anchor">#</a> 二进制知识实战巩固</h2> <p>我们学习了以上知识后，为了检验我们是否掌握，就拿<code>javascript</code>中最经典的<code>0.1+0.2 !=== 0.3</code> 为例，来分析一下其中的原因。</p> <p>首先，我们要知道，<code>javascript</code> 存储的二进制数是64位精度的</p> <h3 id="_1-转换"><a href="#_1-转换" class="header-anchor">#</a> 1.转换</h3> <p>首先，我们分别将<code>0.1</code>和<code>0.2</code>转换为二进制小数，可以利用我们上面学过的转换方法，得到的结果是(保留了60位小数)：</p> <table><thead><tr><th>十进制小数</th> <th>二进制小数</th></tr></thead> <tbody><tr><td><code>0.1</code></td> <td><code>0.000110011001100110011001100110011001100110011001100110011001</code></td></tr> <tr><td><code>0.2</code></td> <td><code>0.001100110011001100110011001100110011001100110011001100110011</code></td></tr></tbody></table> <h3 id="_2-改写为统一表达式"><a href="#_2-改写为统一表达式" class="header-anchor">#</a> 2.改写为统一表达式</h3> <p>我们将二进制小数改写为统一表达式，由于统一表达式要求小数点后的位数要和当前精度（64）位的尾数位数一致（52位）,而我们的二进制小数都保留了60位，即使经过改写为统一表达式后左移了几位，但还是多余52位，所以多余部分的我们要截去。</p> <table><thead><tr><th>二进制小数</th> <th>统一表达式</th></tr></thead> <tbody><tr><td><code>0.000110011001100110011001100110011001100110011001100110011001</code></td> <td><code>1.1001100110011001100110011001100110011001100110011001</code> * 2<sup>-4</sup></td></tr> <tr><td><code>0.001100110011001100110011001100110011001100110011001100110011</code></td> <td><code>1.1001100110011001100110011001100110011001100110011001</code> * 2<sup>-3</sup></td></tr></tbody></table> <p><strong>注意：截取的时候不是直接去掉，而是为最大限度保留精度，采取 【0舍1入】的规则</strong></p> <p>上面两个二进制小数的小数部分第53位都为1，所以舍去的时候要加1，</p> <p>即上面两个表达式其实不是最终表达式，最终表达式要在尾数部分+1，得到：</p> <ul><li><p><code>0.1</code> =&gt; <code>1.1001100110011001100110011001100110011001100110011010</code> * 2<sup>-4</sup></p></li> <li><p><code>0.2</code> =&gt; <code>1.1001100110011001100110011001100110011001100110011010</code> * 2<sup>-3</sup></p></li></ul> <h3 id="_3-获得最终存储值"><a href="#_3-获得最终存储值" class="header-anchor">#</a> 3.获得最终存储值</h3> <p>我们要分别转换为统一表达式后的符号位、指数位、尾数位</p> <p>这里，尾数可以直接从表达式里拿到，符号位都是0（正数），唯一剩余的就是获取指数位了</p> <p>在64位精度下，指数位位11位，所以最大二进制值为<code>1111 1111 111</code>，取中间数，即除以2，右移一位，左位补零，得到<code>0111 1111 111</code> （十进制1023）</p> <p>然后根据EXCESS系统规则列出它前后的对应值：</p> <table><thead><tr><th>二进制值</th> <th>十进制值</th> <th>EXCESS系统值（指数值）</th></tr></thead> <tbody><tr><td>011 1111 1011</td> <td>1019</td> <td>-4</td></tr> <tr><td>011 1111 1100</td> <td>1020</td> <td>-3</td></tr> <tr><td>011 1111 1101</td> <td>1021</td> <td>-2</td></tr> <tr><td>011 1111 1110</td> <td>1022</td> <td>-1</td></tr> <tr><td>0111 1111 111</td> <td>1023</td> <td>0</td></tr> <tr><td>100 0000 0000</td> <td>1024</td> <td>1</td></tr> <tr><td>100 0000 0001</td> <td>1025</td> <td>2</td></tr> <tr><td>100 0000 0010</td> <td>1026</td> <td>3</td></tr> <tr><td>100 0000 0011</td> <td>1027</td> <td>……</td></tr></tbody></table> <p>那么<code>0.1</code> 和 <code>0.2</code>的指数位分别是EXCESS系统<code>-4</code>和<code>-3</code>所对应的值：</p> <ul><li><code>0.1</code> 指数位：<code>011 1111 1011</code></li> <li><code>0.2</code> 指数位： <code>011 1111 1100</code></li></ul> <p>由此，获得<code>0.1</code>与<code>0.2</code>的二进制最终存储值：</p> <table><thead><tr><th>十进制值</th> <th>二进制存储值</th></tr></thead> <tbody><tr><td><code>0.1</code></td> <td><code>0 01111111011 1001100110011001100110011001100110011001100110011010</code></td></tr> <tr><td><code>0.2</code></td> <td><code>0 01111111100 1001100110011001100110011001100110011001100110011010</code></td></tr></tbody></table> <h3 id="计算和"><a href="#计算和" class="header-anchor">#</a> 计算和</h3> <p>现在，我们将上表中两个二进制存储值进行相加，逢二进一，得到二进制存储结果：</p> <p><code>0 0111 1111 101 0011001100110011001100110011001100110011001100110100</code></p> <p>那么我们如何将它还原回二进制进而还原回十进制小数呢？</p> <p>逆向工程开始：</p> <ul><li>第1位0，代表正数</li> <li>第2到12位，代表指数，<code>0111 1111 101</code> 对照上面的EXCESS系统表，是十进制的1021，对应指数位<code>-2</code></li> <li>第13位到64位，<code>0011001100110011001100110011001100110011001100110100</code> 代表尾数</li> <li>还原为统一表达式： <code>1.0011001100110011001100110011001100110011001100110100</code> * 2<sup>-2</sup></li> <li>得到无指数形式：     <code>0.010011001100110011001100110011001100110011001100110100</code></li></ul> <p>然后我们利用第一节的二进制小数转换十进制的方法，得到结果：</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/202109271805829.png" alt="image-20210927180509588"></p> <p>所以，在<code>javascript</code>中，<code>0.1 + 0.2 === 0.30000000000000004</code> 会返回<code>true</code>;</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/202109271806356.png" alt="image-20210927180623246"></p></div></div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cd8205c8.js" defer></script><script src="/assets/js/11.4c288b74.js" defer></script><script src="/assets/js/26.cc4cf83e.js" defer></script>
  </body>
</html>
