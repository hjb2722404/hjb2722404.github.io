<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>富文本编辑器开发系列——Range API 探究 | 林中路</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="

[TOC]

基本属性

为了方便观察range的基本属性，我们写以下测试代码：

image-20200831214251078

在线测试

我们 ...">
    
    <link rel="preload" href="/assets/css/0.styles.6d0d6f13.css" as="style"><link rel="preload" href="/assets/js/app.cd8205c8.js" as="script"><link rel="preload" href="/assets/js/11.4c288b74.js" as="script"><link rel="preload" href="/assets/js/127.9b3097f5.js" as="script"><link rel="prefetch" href="/assets/js/1.c492b4cd.js"><link rel="prefetch" href="/assets/js/10.5c791580.js"><link rel="prefetch" href="/assets/js/100.98ff7760.js"><link rel="prefetch" href="/assets/js/101.e5cd16d7.js"><link rel="prefetch" href="/assets/js/102.cc9bc85b.js"><link rel="prefetch" href="/assets/js/103.7b07b598.js"><link rel="prefetch" href="/assets/js/104.ee58d457.js"><link rel="prefetch" href="/assets/js/105.48c57f25.js"><link rel="prefetch" href="/assets/js/106.b702757c.js"><link rel="prefetch" href="/assets/js/107.8122f1ef.js"><link rel="prefetch" href="/assets/js/108.51e66dbe.js"><link rel="prefetch" href="/assets/js/109.3145253b.js"><link rel="prefetch" href="/assets/js/110.f9990065.js"><link rel="prefetch" href="/assets/js/111.3263bd3f.js"><link rel="prefetch" href="/assets/js/112.9071b5e2.js"><link rel="prefetch" href="/assets/js/113.f131242e.js"><link rel="prefetch" href="/assets/js/114.7a6e09f7.js"><link rel="prefetch" href="/assets/js/115.508d99ac.js"><link rel="prefetch" href="/assets/js/116.f4900a92.js"><link rel="prefetch" href="/assets/js/117.e5957144.js"><link rel="prefetch" href="/assets/js/118.062eb3c1.js"><link rel="prefetch" href="/assets/js/119.93634bcc.js"><link rel="prefetch" href="/assets/js/12.c3b16095.js"><link rel="prefetch" href="/assets/js/120.1bada0ab.js"><link rel="prefetch" href="/assets/js/121.7d55e294.js"><link rel="prefetch" href="/assets/js/122.b7f7c837.js"><link rel="prefetch" href="/assets/js/123.3a0b4694.js"><link rel="prefetch" href="/assets/js/124.bd458b77.js"><link rel="prefetch" href="/assets/js/125.8ca612c9.js"><link rel="prefetch" href="/assets/js/126.35bccb3e.js"><link rel="prefetch" href="/assets/js/128.5833cf40.js"><link rel="prefetch" href="/assets/js/129.38ec9907.js"><link rel="prefetch" href="/assets/js/13.91404f5a.js"><link rel="prefetch" href="/assets/js/130.932a54c4.js"><link rel="prefetch" href="/assets/js/131.f4ab894a.js"><link rel="prefetch" href="/assets/js/14.ef93462f.js"><link rel="prefetch" href="/assets/js/15.83829c35.js"><link rel="prefetch" href="/assets/js/16.d245c760.js"><link rel="prefetch" href="/assets/js/17.4a9f3c99.js"><link rel="prefetch" href="/assets/js/18.75ce45c7.js"><link rel="prefetch" href="/assets/js/19.b86d35ae.js"><link rel="prefetch" href="/assets/js/20.9657eb2e.js"><link rel="prefetch" href="/assets/js/21.f89cf353.js"><link rel="prefetch" href="/assets/js/22.746aec5f.js"><link rel="prefetch" href="/assets/js/23.ca2ee980.js"><link rel="prefetch" href="/assets/js/24.e1eeb0f4.js"><link rel="prefetch" href="/assets/js/25.f96e0147.js"><link rel="prefetch" href="/assets/js/26.cc4cf83e.js"><link rel="prefetch" href="/assets/js/27.f940e542.js"><link rel="prefetch" href="/assets/js/28.99771a3c.js"><link rel="prefetch" href="/assets/js/29.841b64b0.js"><link rel="prefetch" href="/assets/js/30.772e1ff4.js"><link rel="prefetch" href="/assets/js/31.7e0b62c5.js"><link rel="prefetch" href="/assets/js/32.cf3d5fb6.js"><link rel="prefetch" href="/assets/js/33.b338e29a.js"><link rel="prefetch" href="/assets/js/34.8b8356fe.js"><link rel="prefetch" href="/assets/js/35.1b12a1f7.js"><link rel="prefetch" href="/assets/js/36.547e2f8d.js"><link rel="prefetch" href="/assets/js/37.36a240bd.js"><link rel="prefetch" href="/assets/js/38.4f6b92e3.js"><link rel="prefetch" href="/assets/js/39.5133d0dd.js"><link rel="prefetch" href="/assets/js/4.524efd0b.js"><link rel="prefetch" href="/assets/js/40.8c765af6.js"><link rel="prefetch" href="/assets/js/41.b7234e21.js"><link rel="prefetch" href="/assets/js/42.b5ac212a.js"><link rel="prefetch" href="/assets/js/43.5d1b3b6c.js"><link rel="prefetch" href="/assets/js/44.eda633f8.js"><link rel="prefetch" href="/assets/js/45.39f5263b.js"><link rel="prefetch" href="/assets/js/46.f1fbfada.js"><link rel="prefetch" href="/assets/js/47.ed969447.js"><link rel="prefetch" href="/assets/js/48.e1867366.js"><link rel="prefetch" href="/assets/js/49.c2a4bc6b.js"><link rel="prefetch" href="/assets/js/5.a180cf14.js"><link rel="prefetch" href="/assets/js/50.da77d6a3.js"><link rel="prefetch" href="/assets/js/51.4183e6ab.js"><link rel="prefetch" href="/assets/js/52.b18add11.js"><link rel="prefetch" href="/assets/js/53.08c1d448.js"><link rel="prefetch" href="/assets/js/54.9edeb19b.js"><link rel="prefetch" href="/assets/js/55.9a3ed63e.js"><link rel="prefetch" href="/assets/js/56.dcf34dca.js"><link rel="prefetch" href="/assets/js/57.2123aa49.js"><link rel="prefetch" href="/assets/js/58.c9833b3b.js"><link rel="prefetch" href="/assets/js/59.8da7c174.js"><link rel="prefetch" href="/assets/js/6.529edc8a.js"><link rel="prefetch" href="/assets/js/60.9a70415e.js"><link rel="prefetch" href="/assets/js/61.35935df8.js"><link rel="prefetch" href="/assets/js/62.0e63cfe7.js"><link rel="prefetch" href="/assets/js/63.a52d5a72.js"><link rel="prefetch" href="/assets/js/64.cf7dfcc7.js"><link rel="prefetch" href="/assets/js/65.0220a5ee.js"><link rel="prefetch" href="/assets/js/66.5cd774f3.js"><link rel="prefetch" href="/assets/js/67.d8943555.js"><link rel="prefetch" href="/assets/js/68.7cf24f78.js"><link rel="prefetch" href="/assets/js/69.56501738.js"><link rel="prefetch" href="/assets/js/7.ac95b826.js"><link rel="prefetch" href="/assets/js/70.9626260f.js"><link rel="prefetch" href="/assets/js/71.a466c6f1.js"><link rel="prefetch" href="/assets/js/72.0a678f77.js"><link rel="prefetch" href="/assets/js/73.597ea695.js"><link rel="prefetch" href="/assets/js/74.a0387d5c.js"><link rel="prefetch" href="/assets/js/75.97871f2e.js"><link rel="prefetch" href="/assets/js/76.7d8e44c7.js"><link rel="prefetch" href="/assets/js/77.b53c8e31.js"><link rel="prefetch" href="/assets/js/78.9fef1461.js"><link rel="prefetch" href="/assets/js/79.9af76496.js"><link rel="prefetch" href="/assets/js/8.6bb76bea.js"><link rel="prefetch" href="/assets/js/80.5f7ee3db.js"><link rel="prefetch" href="/assets/js/81.1937e784.js"><link rel="prefetch" href="/assets/js/82.2bdeb675.js"><link rel="prefetch" href="/assets/js/83.e04a8620.js"><link rel="prefetch" href="/assets/js/84.ca8713d0.js"><link rel="prefetch" href="/assets/js/85.40f655ff.js"><link rel="prefetch" href="/assets/js/86.87397155.js"><link rel="prefetch" href="/assets/js/87.798cdf26.js"><link rel="prefetch" href="/assets/js/88.e089f692.js"><link rel="prefetch" href="/assets/js/89.5d842e18.js"><link rel="prefetch" href="/assets/js/9.5b2ac283.js"><link rel="prefetch" href="/assets/js/90.4157be98.js"><link rel="prefetch" href="/assets/js/91.7ed6afe7.js"><link rel="prefetch" href="/assets/js/92.9c50ce3b.js"><link rel="prefetch" href="/assets/js/93.e8e16a70.js"><link rel="prefetch" href="/assets/js/94.cf98a377.js"><link rel="prefetch" href="/assets/js/95.a4b78938.js"><link rel="prefetch" href="/assets/js/96.a7a9f018.js"><link rel="prefetch" href="/assets/js/97.f96c42c9.js"><link rel="prefetch" href="/assets/js/98.ce7378e5.js"><link rel="prefetch" href="/assets/js/99.24959418.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.706cf0ce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6d0d6f13.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="global-layout"><div class="header"><div class="blog-info" data-v-54e0dde5>
   林中路
   <p data-v-54e0dde5>少有人走的路，逐渐向世界显现</p></div> <div class="blog-author-info" data-v-51bc2051><p class="author-head-img" data-v-51bc2051><img src="/assets/img/head-img.8e2d0100.png" alt data-v-51bc2051></p></div> <div class="blog-category-list" data-v-581efa6b><ul data-v-581efa6b></ul></div></div> <div class="content"><div class="template-container" data-v-b70586ba><div class="content" data-v-b70586ba><div class="content__default" data-v-b70586ba><h1 id="富文本编辑器开发系列-range-api-探究"><a href="#富文本编辑器开发系列-range-api-探究" class="header-anchor">#</a> 富文本编辑器开发系列——<code>Range API</code> 探究</h1> <p>[TOC]</p> <h2 id="基本属性"><a href="#基本属性" class="header-anchor">#</a> 基本属性</h2> <p>为了方便观察<code>range</code>的基本属性，我们写以下测试代码：</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154455.png" alt="image-20200831214251078"></p> <p><a href="https://jshare.com.cn/selection/BtGfG1" target="_blank" rel="noopener noreferrer">在线测试<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>我们选中一段文本，然后看页面的输出和控制台的输出。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154526.png" alt="image-20200831214635853"></p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154538.png" alt="image-20200831214813395"></p> <p><img src="https://raw.githubusercontent.com/hjb2722404/myimg/master/20200910092643.png" alt="image-20200831214844785"></p> <p>我们观察到它的几个属性：</p> <ul><li><code>collapsed</code>: 是否闭合，即当前选区是否是一个光标，只有开始节点与结束节点相同，并且开始偏移量与结束偏移量相同时才是<code>true</code>，此处未闭合，所以是<code>false</code>。</li> <li><code>commonAncestorContainer</code>：返回包含开始节点与结束节点的最深一级的节点（根节点），此处是设置了<code>onclick</code>属性的<code>div</code>节点，注意，这里最深一级是指可编辑区域所包含的节点中的最深一级（并且不包含设置了<code>contenteditable</code>属性为<code>true</code>的节点本身。）</li> <li><code>endContainer</code>:  结束节点，拖蓝结束点所在的<code>DOM</code> 节点，此处是多行文本所在的文本节点，注意，是文本节点，而不是包含它的<code>p</code> 节点。</li> <li><code>endOffset</code> : 结束偏移量，即从结束节点的开始位置数起，到拖蓝结束位置所经过的字数。如果结束节点是一个包含子元素的<code>DOM</code>元素，则代表从该节点的第一个节点到拖蓝结束位置所在的节点所经过的节点数。</li> <li><code>startContainer</code>：开始节点，拖蓝的起点所在的<code>DOM</code>节点，此处是<code>id</code>为<code>first</code>的<code>p</code>节点所包裹的文本节点，但又不包含其中<code>id</code>为<code>third</code>的<code>span</code>节点。</li> <li><code>startOffset</code>：开始偏移量，即从开始节点的开始位置数起，到拖蓝开始位置所经过的字数。如果开始节点是一个包含子元素的<code>DOM</code>元素，则代表从该节点第一个节点到拖蓝开始位置所在的节点所经过的节点数。</li></ul> <p>对于<code>startContainer</code> 中的情况，我们可以再做一个实验来验证：</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154547.png" alt="image-20200831220732554"></p> <p>可以看到，这里开始节点是<code>这里是另一段普通的</code> 文本节点，而结束节点是<code>文字内容啊</code> 文本节点，虽然它们都在同一<code>p</code>节点中，但因为有<code>span</code> 节点的分割，它俩分别是独立的文本节点了。</p> <h2 id="成员方法"><a href="#成员方法" class="header-anchor">#</a> 成员方法</h2> <h3 id="setstart-startnode-startoffset"><a href="#setstart-startnode-startoffset" class="header-anchor">#</a> <code>setStart(startNode, startOffset)</code></h3> <p>设置拖蓝的起点,<code>startNode</code>：开始节点，<code>startOffset</code>: 起点相对于开始节点开始位置的偏移量</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154559.gif" alt="rangeApi_setStart"></p> <p><a href="https://codesandbox.io/s/rangeapisetstart-h5ye5?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setStart"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetstart-h5ye5?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setStart" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="setend-endnode-endoffset"><a href="#setend-endnode-endoffset" class="header-anchor">#</a> <code>setEnd(endNode, endOffset)</code></h3> <p>设置拖蓝的终点，<code>endNode</code>:结束节点， <code>endOffset</code>: 终点相对于结束节点开始位置的偏移量。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154656.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisetstartbefore-xye5b?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setStartBefore"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetstartbefore-xye5b?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setStartBefore" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="setstartbefore-referencenode"><a href="#setstartbefore-referencenode" class="header-anchor">#</a> <code>setStartBefore(referenceNode)</code></h3> <p>相对于另一个节点来设置拖蓝的开始位置，该拖蓝的开始节点与另一个节点的父节点是同一个，开始节点在另一个节点之前</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154840.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisetstartbefore-ck81v?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setStartBefore"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetstartbefore-ck81v?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setStartBefore" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="setstartafter-referencenode"><a href="#setstartafter-referencenode" class="header-anchor">#</a> <code>setStartAfter(referenceNode)</code></h3> <p>相对于另一个节点来设置拖蓝的开始位置，该拖蓝的开始节点与另一个节点的父节点是同一个，开始节点在另一个节点之后.</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154901.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisetstartafter-jw701?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setStartAfter"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetstartafter-jw701?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setStartAfter" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="setendbefore-referencenode"><a href="#setendbefore-referencenode" class="header-anchor">#</a> <code>setEndBefore(referenceNode)</code></h3> <p>相对于另一个节点来设置拖蓝的结束位置，该拖蓝的结束节点与另一个节点的父节点是同一个，结束节点在另一个节点之前.</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154922.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisetendbefore-qtn4x?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setEndBefore"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://jshare.com.cn/selection/4PGffs" target="_blank" rel="noopener noreferrer">在线测试<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetendbefore-qtn4x?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setEndBefore" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="setendafter-referencenode"><a href="#setendafter-referencenode" class="header-anchor">#</a> <code>setEndAfter(referenceNode)</code></h3> <p>相对于另一个节点来设置拖蓝的结束位置，该拖蓝的结束节点与另一个节点的父节点是同一个，结束节点在另一个节点之后.</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154942.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisetendafter-ngxx8?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_setEndAfter"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisetendafter-ngxx8?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_setEndAfter" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="seelctnode-referencenode"><a href="#seelctnode-referencenode" class="header-anchor">#</a> <code>seelctNode(referenceNode)</code></h3> <p>将拖蓝设置为包含整个节点及其内容， 拖蓝的起始和结束节点的父节点与传入节点（<code>referenceNode</code>）的父节点相同。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210154959.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapiselectnode-uiipq?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_selectNode"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapiselectnode-uiipq?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_selectNode" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="selectnodecontents-referencenode"><a href="#selectnodecontents-referencenode" class="header-anchor">#</a> <code>selectNodeContents(referenceNode)</code></h3> <p>设置拖蓝，使其包含传入节点的内容，拖蓝的起始和结束节点的父节点即为传入的节点。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155013.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapiselectnodecontents-1rru5?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_selectNodeContents"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapiselectnodecontents-1rru5?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_selectNodeContents" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="collapse-tostart"><a href="#collapse-tostart" class="header-anchor">#</a> <code>collapse(toStart)</code></h3> <p>闭合拖蓝。<code>toStart</code>: 闭合方向，<code>true</code>向起点闭合，<code>false</code>向终点闭合。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155024.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapicollapse-5qvgs?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_collapse"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapicollapse-5qvgs?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_collapse" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="clonecontents"><a href="#clonecontents" class="header-anchor">#</a> <code>cloneContents()</code></h3> <p>返回包含拖蓝中所有节点的文档片段</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155040.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapiclonecontents-7orr6?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_cloneContents"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapiclonecontents-7orr6?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_cloneContents" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="deletecontents"><a href="#deletecontents" class="header-anchor">#</a> <code>deleteContents()</code></h3> <p>从文档中移除拖蓝包含的内容</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155057.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapideletecontents-forked-ccil7?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_deleteContents (forked)"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapideletecontents-forked-ccil7?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_deleteContents (forked)" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="extractcontents"><a href="#extractcontents" class="header-anchor">#</a> <code>extractContents()</code></h3> <p>把拖蓝的内容从文档树移动到一个文档片段中，返回该文档片段</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155109.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapiextractcontents-zk6q6?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_extractContents"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapiextractcontents-zk6q6?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_extractContents" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="insertnode-newnode"><a href="#insertnode-newnode" class="header-anchor">#</a> <code>insertNode(newNode)</code></h3> <p>在拖蓝的起始位置插入一个新的节点，如果将新节点添加到一个文本节点，则该文本节点在插入点处被拆分，插入发生在两个文本节点之间；如果新节点是一个文档片段，则插入文档片段的子节点。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155128.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapiinsertnode-8fps2?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_insertNode"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapiinsertnode-8fps2?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_insertNode" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="surroundcontents-newparent"><a href="#surroundcontents-newparent" class="header-anchor">#</a> <code>surroundContents(newParent)</code></h3> <p>将拖蓝的内容移动到一个新的节点，并将新节点放到这个范围的起始处。它会从DOM中删除新节点内容。</p> <p><img src="https://gitee.com/hjb2722404/tuchuang/raw/master/img/20201210155200.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapisurroundcontents-6vo9d?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_surroundContents"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapisurroundcontents-6vo9d?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_surroundContents" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe> <h3 id="compareboundarypoints-how-sourcerange"><a href="#compareboundarypoints-how-sourcerange" class="header-anchor">#</a> <code>compareBoundaryPoints(how, sourceRange)</code></h3> <p>比较两个拖蓝的端点。 <code>how</code>：指定如何比较，参见本表下方<code>how</code>部分。<code>sourceRange</code> : 要与之比较的拖蓝，返回一个数字，<code>-1/0/1</code>中的一个，表示本拖蓝的指定端点在源拖蓝的指定端点前面，相同位置还是后面。</p> <h4 id="how"><a href="#how" class="header-anchor">#</a> <code>how</code></h4> <p>指定如何比较，有四个可选值：</p> <ul><li><code>Range.END_TO_END</code>:  比较源拖蓝的终点与本拖蓝的终点</li> <li><code>Range.END_TO_START</code>: 比较源拖蓝的终点与本拖蓝的起点</li> <li><code>Range.START_TO_END</code>: 比较源拖蓝的起点与本拖蓝的终点</li> <li><code>Range.START_TO_START</code>: 比较源拖蓝的起点与本拖蓝的起点</li></ul> <p><img src="https://raw.githubusercontent.com/hjb2722404/myimg/master/20200910092954.gif" alt=""></p> <p><a href="https://codesandbox.io/s/rangeapicompareboundarypoints-71bx7?fontsize=14&amp;hidenavigation=1&amp;theme=dark" target="_blank" rel="noopener noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit rangeAPI_compareBoundaryPoints"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <iframe src="https://codesandbox.io/embed/rangeapicompareboundarypoints-71bx7?fontsize=14&amp;hidenavigation=1&amp;theme=dark" title="rangeAPI_compareBoundaryPoints" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="width:100%;height:500px;border:0;border-radius:4px;overflow:hidden;"></iframe></div></div></div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.cd8205c8.js" defer></script><script src="/assets/js/11.4c288b74.js" defer></script><script src="/assets/js/127.9b3097f5.js" defer></script>
  </body>
</html>
